I"j<h2 id="c-zip"><center>[C#] zip</center></h2>

<blockquote>
  <p><a href="https://github.com/chanos-dev/blogcode/tree/master/21-0408">Git Source</a></p>
</blockquote>

<hr />

<blockquote>
  <p><b> ZipArchive </b> ğŸ˜</p>
</blockquote>

<p>.Net Framework 4.5 ë¶€í„° ì••ì¶•ì— ëŒ€í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µì´ ë˜ë©° ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ZipArchiveì— ëŒ€í•´ ì†Œê°œí•˜ë ¤í•œë‹¤.</p>

<ul>
  <li>ìµëª… íƒ€ì… íŠ¹ì§•
    <ol>
      <li>ì½ê¸° ì „ìš©ì´ë‹¤. (í• ë‹¬ ë¶ˆê°€ëŠ¥)</li>
      <li>ë³€ìˆ˜í• ë‹¹ ì‹œ íƒ€ì…ì€ <code class="language-plaintext highlighter-rouge">var</code></li>
      <li>new { ì†ì„± : ê°’ } í˜•ì‹ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">Json</code> í˜•íƒœì™€ ë¹„ìŠ·í•˜ë‹¤.</li>
      <li>ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ì´ ë¶ˆê°€í•˜ê³  ë¦¬í„´ íƒ€ì…ìœ¼ë¡œë„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</li>
    </ol>
  </li>
</ul>

<p>ì‚¬ìš©ë°©ë²•)</p>

<p><a href="http://localhost:4000/images/posts/2021-04-06/use1.png"><img src="http://localhost:4000/images/posts/2021-04-06/use1.png" alt="use1" /></a></p>
<ul>
  <li>ì»´íŒŒì¼ëŸ¬ëŠ” ìµëª… íƒ€ì…ì— ëŒ€í•´ ë‚´ë¶€ì ìœ¼ë¡œ ì„ì˜ì˜ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.</li>
  <li>ì´ë¯¸ì§€ì™€ ê°™ì´ setterê°€ ì—†ê³  getterë§Œ ìˆë‹¤.</li>
</ul>

<hr />

<p>ì»´íŒŒì¼ëŸ¬ëŠ” ì´ì „ì— ë§Œë“  ìµëª… íƒ€ì…ì„ ì¬ì‚¬ìš©í•˜ì§€ë§Œ ì¡°ê±´ì´ ìˆë‹¤.</p>
<ol>
  <li>ë™ì¼í•œ ì–´ì…ˆë¸”ë¦¬ ë‚´ì— ì„ ì–¸ë˜ì–´ì•¼í•œë‹¤.</li>
  <li>ì†ì„± ì´ë¦„ê³¼ íƒ€ì…ì´ ì¼ì¹˜í•´ì•¼ í•˜ë©°, ê°™ì€ ìˆœì„œë¡œ ì„ ì–¸ë˜ì–´ì•¼í•œë‹¤.</li>
</ol>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">person</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"í™ê¸¸ë™"</span><span class="p">,</span> <span class="n">Age</span> <span class="p">=</span> <span class="m">24</span><span class="p">,</span> <span class="n">Address</span> <span class="p">=</span> <span class="s">"ê²½ê¸°ë„ ê´‘ì£¼"</span> <span class="p">};</span>
<span class="kt">var</span> <span class="n">person2</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"í™ê¸¸ë™"</span><span class="p">,</span> <span class="n">Address</span> <span class="p">=</span> <span class="s">"ê²½ê¸°ë„ ê´‘ì£¼"</span><span class="p">,</span> <span class="n">Age</span> <span class="p">=</span> <span class="m">24</span> <span class="p">};</span>
<span class="c1">// ë‹¤ìŒ ë‘ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì„œë¡œ ë‹¤ë¥¸ ë…ë¦½ì ì¸ ìµëª…íƒ€ì…ì„ ìƒì„±í•œë‹¤.</span>
</code></pre></div></div>

<hr />

<p>ìµëª… íƒ€ì…ì€ ê³µì‹ì ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•  í•„ìš” ì—†ì´ Typeì„ ê°„ë‹¨íˆ ì„ì‹œë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•  ë•Œ ìœ ìš©í•˜ë‹¤. íŠ¹íˆ ìµëª… íƒ€ì…ì€ LINQë¥¼ ì‚¬ìš©í•  ë•Œ ë§ì´ ì‚¬ìš©ëœë‹¤.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">internal</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">CreateZip</span><span class="p">(</span><span class="kt">string</span> <span class="n">contentsFolderPath</span><span class="p">,</span> <span class="kt">string</span> <span class="n">saveZipPath</span><span class="p">,</span> <span class="kt">string</span> <span class="n">extention</span> <span class="p">=</span> <span class="s">"*"</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">Directory</span><span class="p">.</span><span class="nf">Exists</span><span class="p">(</span><span class="n">contentsFolderPath</span><span class="p">))</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">DirectoryNotFoundException</span><span class="p">(</span><span class="s">$"The directory is not found. \n</span><span class="p">{</span><span class="n">contentsFolderPath</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(!</span><span class="n">Directory</span><span class="p">.</span><span class="nf">Exists</span><span class="p">(</span><span class="n">saveZipPath</span><span class="p">))</span>
        <span class="n">Directory</span><span class="p">.</span><span class="nf">CreateDirectory</span><span class="p">(</span><span class="n">Path</span><span class="p">.</span><span class="nf">GetDirectoryName</span><span class="p">(</span><span class="n">saveZipPath</span><span class="p">));</span>

    <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">fs</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FileStream</span><span class="p">(</span><span class="n">saveZipPath</span><span class="p">,</span> <span class="n">FileMode</span><span class="p">.</span><span class="n">Create</span><span class="p">,</span> <span class="n">FileAccess</span><span class="p">.</span><span class="n">ReadWrite</span><span class="p">))</span>
    <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">za</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ZipArchive</span><span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="n">ZipArchiveMode</span><span class="p">.</span><span class="n">Create</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">filePath</span> <span class="k">in</span> <span class="n">Directory</span><span class="p">.</span><span class="nf">EnumerateFiles</span><span class="p">(</span><span class="n">contentsFolderPath</span><span class="p">,</span> <span class="s">$"*.</span><span class="p">{</span><span class="n">extention</span><span class="p">}</span><span class="s">"</span><span class="p">,</span> <span class="n">SearchOption</span><span class="p">.</span><span class="n">AllDirectories</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span> 
                <span class="n">za</span><span class="p">.</span><span class="nf">CreateEntryFromFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="n">Path</span><span class="p">.</span><span class="nf">GetFileName</span><span class="p">(</span><span class="n">filePath</span><span class="p">));</span>
                                    
                <span class="c1">//var entry = za.CreateEntry(Path.GetFileName(filePath));</span>
                <span class="c1">//using (var es = entry.Open())</span>
                <span class="c1">//using (var writer = new StreamWriter(es))</span>
                <span class="c1">//{</span>
                <span class="c1">//    writer.Write(File.ReadAllText(filePath));</span>
                <span class="c1">//}</span>
            <span class="p">}</span>
            <span class="k">catch</span>
            <span class="p">{</span>
                <span class="k">throw</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="reference">Reference</h2>

<p><a href="http://csharphelper.com/blog/2016/03/fill-and-draw-pie-slices-in-c/">Fill and draw pie clices in C#</a></p>
:ET