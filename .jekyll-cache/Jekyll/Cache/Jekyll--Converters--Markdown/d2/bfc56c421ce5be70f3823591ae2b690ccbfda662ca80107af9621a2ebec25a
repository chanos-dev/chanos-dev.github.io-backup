I"‚<h2 id="c-makegenericmethod"><center>c# MakeGenericMethod</center></h2>

<blockquote>
  <p><a href="https://github.com/chanos-dev/blogcode/tree/master/21-0925" target="_blank">Git Source</a></p>
</blockquote>

<hr />

<p>ì œë„¤ë¦­ì„ ì‚¬ìš©í•˜ë˜ ì¤‘ type parameterì— type ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„£ì–´ì„œ ë¡œì§ì„ êµ¬í˜„í•˜ê³  ì‹¶ì–´ì„œ ë°©ë²•ì„ ì°¾ì•„ë³´ì•˜ë‹¤.</p>

<p>ì¼ë°˜ì ìœ¼ë¡œ ì œë„¤ë¦­ íƒ€ì…ì— type ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„£ê²Œë˜ë©´ ì»´íŒŒì¼ ì—ëŸ¬[<a href="https://docs.microsoft.com/en-us/dotnet/csharp/misc/cs0118?f1url=%3FappId%3Droslyn%26k%3Dk(CS0118)" target="_blank">CS0118</a>]ê°€ ë°œìƒí•œë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì´ë‹¤.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">internal</span> <span class="k">enum</span> <span class="n">FooType</span>
<span class="p">{</span>
    <span class="c1">// values...</span>
<span class="p">}</span>

<span class="k">internal</span> <span class="k">void</span> <span class="n">GenericMethod</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;()</span>
<span class="p">{</span>
    <span class="c1">// do something...</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">p</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Program</span><span class="p">();</span>

    <span class="kt">var</span> <span class="n">enumType</span> <span class="p">=</span> <span class="k">typeof</span><span class="p">(</span><span class="n">FooType</span><span class="p">);</span>
    <span class="n">p</span><span class="p">.</span><span class="n">GenericMethod</span><span class="p">&lt;</span><span class="n">enumType</span><span class="p">&gt;();</span> <span class="c1">// Error!!</span>
<span class="p">}</span>
</code></pre></div></div>

<p>p.GenericMethod<enumType>(); êµ¬ë¬¸ê³¼ ê°™ì´ ì œë„¤ë¦­ type parameterì— type ì¸ìŠ¤í„´ìŠ¤ê°€ ë“¤ì–´ê°€ëŠ” ê²½ìš° ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</enumType></p>
<ul>
  <li>type parameterëŠ” í´ë˜ìŠ¤ëª… ë˜ëŠ” í‚¤ì›Œë“œì™€ ê°™ì´ ì´ë¦„ì´ ë“¤ì–´ê°€ì•¼ í•œë‹¤.</li>
</ul>

<p>type ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„£ì–´ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê²½ìš°â€¦ ê²€ìƒ‰ì„ í•´ë³¸ ê²°ê³¼ reflectionì„ ì´ìš©í•´ì„œ MakeGenericMethodë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.</p>

<p>ì‚¬ìš©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Program</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="n">GenericFoo</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;()</span>
    <span class="p">{</span>
        <span class="c1">// do something...</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">GenericBoo</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;()</span>
    <span class="p">{</span>
        <span class="c1">// do something...</span>
    <span class="p">}</span>

    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">p</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Program</span><span class="p">();</span> 

        <span class="c1">// instance method</span>
        <span class="n">p</span><span class="p">.</span><span class="nf">GetType</span><span class="p">().</span><span class="nf">GetMethod</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">Program</span><span class="p">.</span><span class="n">GenericFoo</span><span class="p">)).</span><span class="nf">MakeGenericMethod</span><span class="p">(</span><span class="n">enumType</span><span class="p">).</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>

        <span class="c1">// class method</span>
        <span class="k">typeof</span><span class="p">(</span><span class="n">Program</span><span class="p">).</span><span class="nf">GetMethod</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">Program</span><span class="p">.</span><span class="n">GenericFoo</span><span class="p">)).</span><span class="nf">MakeGenericMethod</span><span class="p">(</span><span class="n">enumType</span><span class="p">).</span><span class="nf">Invoke</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>        
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>GetMethodë¥¼ ì´ìš©í•˜ì—¬ MethodInfoë¥¼ ê°€ì ¸ì˜¨ í›„ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì¸ MakeGenericMethodë¥¼ í˜¸ì¶œí•˜ì—¬ ì œë„¤ë¦­ ë©”ì„œë“œë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.</p>

<p>MakeGenericMethodì˜ ì¸ìë¡œëŠ” params type[]ì„ ë°›ìœ¼ë©° ê°€ì ¸ì˜¨ ì œë„¤ë¦­ ë©”ì„œë“œì˜ type paramater ì¸ì ë§Œí¼ ìˆœì„œëŒ€ë¡œ ì¸ìë¡œ ë„£ì–´ì£¼ë©´ ëœë‹¤.</p>

<hr />

<h2 id="reference">Reference</h2>

<p><a href="https://docs.microsoft.com/ko-kr/dotnet/api/system.reflection.methodinfo.makegenericmethod?view=net-5.0" target="_blank">MethodInfo.MakeGenericMethod(Type[]) ë©”ì„œë“œ</a></p>
:ET