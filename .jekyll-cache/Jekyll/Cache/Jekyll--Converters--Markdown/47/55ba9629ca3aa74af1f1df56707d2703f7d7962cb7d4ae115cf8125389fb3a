I"3<h2 id="loh"><center>LOH</center></h2>

<hr />

<p>C#의 CLR은 Heap을 관리할 때 크게 두 가지로 나눠서 관리를 한다.</p>

<ul>
  <li>용량이 작은 SOH(Small Object Heap)와 용량이 큰(85kb 이상) LOH(Large Object Heap)이다.</li>
</ul>

<p>SOH는 일반적으로 알고 있는 세대별 가비지 컬렉션을 이용하여 관리를 하는 반면에 LOH는 그렇지 않다. LOH의 경우는 메모리 관리 방식이 C, C++에서 사용하는 방식과 비슷하게 관리한다.</p>

<p>SOH에서는 GC가 일어나면 힙상에서 메모리를 재배치 시키는 컴팩션이 일어나지만, LOH는 컴팩션이 일어나지 않고 해제된 공간을 그대로 둔다.</p>

<ul>
  <li>용량이 큰 LOH의 메모리 위치를 재배치하는 것은 오버헤드가 크기 때문이다. 그렇기 떄문에 메모리 단편화가 일어날 수 있다.</li>
</ul>

<p>위에서 얘기했다 시피 SOH는 세대별 가비지 컬렉션을 이용하기 때문에 0~2세대가 존재하는 반면 LOH는 2세대 밖에 존재하지 않는다.</p>
:ET